<!--
          Team: Marcel, Raphael, Patricia, Anselm
          Modul: ConfernceRoom
          date: 06.06.18
 -->
<%@ page contentType="text/html; charset=UTF-8" %>

  <%@ page import="com.chimerasys.User" %>

    <%
 
     User u = (User) session.getAttribute("user");
 
     if (u == null) {
 
        response.sendRedirect(request.getContextPath() + "/login.jsp");
 
     }
 
 %>

      <!DOCTYPE html>

      <html>

      <head>

        <meta charset="utf-8" />

        <meta http-equiv="X-UA-Compatible" content="IE=edge">

        <title>Conference Room Manager!</title>

        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="css/intranet.css">
        <link rel="stylesheet" href="css/bootstrap-datetimepicker.css">
        <link rel="stylesheet" href="css/room_conference.css">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB"
          crossorigin="anonymous">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
          crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
          crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T"
          crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.21.0/moment.min.js" type="text/javascript"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
          crossorigin="anonymous"></script>
        <script src="js/bootstrap-datetimepicker.js"></script>

        <script>
          var urljson = "jsonevents.jsp";

          $("div#Eingabe").toggle();
          $(document).ready(function () {
            $.get(urljson, function (data, status) {
              if (status == "success") {
                Daten = data.docs;
                console.log(Daten);

              }
            }, "json").fail(FehlerdatenLaden);
          });



          function FehlerdatenLaden() {
            alert("Laden fehlgeschlagen");
          }
        </script>

        <script>
          function eventUpdate() {
            var betreff = $("#betreff").val();
            var email = $("#email").val();
            var zeitAnf = $("#zeitAnf").val();
            var zeitEnd = $("#zeitEnd").val();
            var commentar = $("commentar").val();
            var location = $("#location").val();
            var url = $("#url").val();
            var serverAction = "newevent";
            $.get("update.jsp", {
              action: serverAction, name: betreff, dtStart: zeitAnf, dtEnd: zeitEnd, location: location,
              comment: commentar, url: url
            }, function (data) {
              consol.log(data);
              if (!hasValue(data, status) && data.status.toLowerCase() == 'ok' {
                roomBookingSucces(betreff, data.message);
              } else {
                roomBookingFailed(betreff, data.message);
              }
            }, "json").fail(function () {
              roomBookingFailed(betreff, "Serverskript oder Anlegen#/Editierfunktion anscheinden nicht vorhanden oder keine Verbindung zum Server")
            });

          }

        </script>


      </head>

      <body>

        <div id='start'>
          <div class="jumbotron">
            <img src='images\dhbw_mosbach_2014.gif' id='Dhbw_Logo' alt='DHBW Logo' />
            <h1 class="display-5">Konferenzraum</h1>
            <p class="lead">Hier können die Konferenzräume erstellt, verwaltet und gelöscht werden</p>
            <hr class="my-5">
            <p>In der App Kalender finden sie alle Raumreservierungen!</p>
            <p class="lead">
              <a class="btn btn-primary btn-lg" href="Kalender" role="button">Kalender anzeigen</a>
            </p>
          </div>
          <!--
<img src='images\background-intranet.jpg' id='Intranet_Background'/>
-->
          <div id='Conference_Menu'>
            <div class="row">
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Raum buchen </h5>
                    <br>
                    <br>
                    <p class="card-text">Reservieren sie einen Raum!</p>
                    <a href="#" class="btn btn-primary btn-bottom" onclick="showFormular('Conference_Editor')">Buchen</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Raumreservierung editieren </h5>
                    <br>
                    <br>
                    <p class="card-text">Bearbeiten sie ihre Raumreservierung!</p>
                    <a href="#" class="btn btn-primary btn-bottom" onclick="showFormular('Conference_Editor')">Bearbeiten</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Raumreservierung löschen </h5>
                    <br>
                    <br>
                    <p class="card-text">Löschen sie ihre Raumreservierung!</p>
                    <a href="#" class="btn btn-primary btn-bottom" onclick="showFormular('Conference_deleteRoom')">Löschen</a>
                  </div>
                </div>
              </div>
              <div class="col-sm-3">
                <div class="card">
                  <div class="card-body">
                    <h5 class="card-title">Raum erstellen </h5>
                    <br>
                    <br>
                    <p class="card-text">Fügen sie neue Konferenzräume hinzu!</p>
                    <a href="#" class="btn btn-primary btn-bottom" onclick="showFormular('Conference_newRoom')">Neuer Raum</a>
                  </div>
                </div>
              </div>
            </div>
          </div>


          <script type="text/javascript">

            function showFormular(editor) {
              var current = document.getElementById(editor);
              document.getElementById('Conference_Editor').style.display = "none";
              document.getElementById('Conference_deleteRoom').style.display = "none";
              document.getElementById('Conference_newRoom').style.display = "none";
              current.style.display = "block";
              $('html:not(:animated), body:not(:animated)').animate({
                scrollTop: $(current).offset().top
              }, 500);
            }

          </script>


          <div id='Conference_Editor'>
            <form>
              <div class="form-row">
                <div class="form-group col-md-3">
                  <label for="betreff">Betreff</label>
                  <input type="text" class="form-control" id="betreff" placeholder="Veranstaltung">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group col-md-6">
                  <label for="inputEmail4">Personen</label>
                  <textarea class="form-control" id="exampleFormControlTextarea1" placeholder='E-Mails' rows="3"></textarea>
                </div>
                <div class="col-auto my-1">
                  <label for="tags">Raum</label>
                  <select multiple class="form-control" id="tags">
                    <option selected>Choose...</option>
                    <option value="1">Raum U1.143</option>
                    <option value="2">Raum E2.278</option>
                    <option value="3">Raum OG1.1126</option>
                  </select>
                </div>
              </div>
              <div class="form-row">
                <div class="from-group col-md-6">
                  <label for="zeitAnf">Zeitanfang</label>

                  <div class="input-append date form_datetime" data-date="2013-02-21T15:25:00Z">
                    <input size="16" type="text" value="" readonly placeholder="yyyy-mm-dd hh:mm" id="zeitAnf">
                    <span class="add-on">
                      <i class="icon-remove"></i>
                    </span>
                    <span class="add-on">
                      <i class="icon-calendar"></i>
                    </span>
                  </div>
                </div>
                <div class="col-auto my-1">
                  <label for="zeitEnd">Zeitende</label>
                  <div class="input-append date form_datetime" data-date="2013-02-21T15:25:00Z">
                    <input size="16" type="text" value="" readonly placeholder="yyyy-mm-dd hh:mm" id="zeitEnd">
                    <span class="add-on">
                      <i class="icon-remove"></i>
                    </span>
                    <span class="add-on">
                      <i class="icon-calendar"></i>
                    </span>

                  </div>
                </div>
                <script type="text/javascript">
                  $(".form_datetime").datetimepicker({
                    format: "yyyy-mm-dd hh:ii",
                    autoclose: true,
                    todayBtn: true,
                    minuteStep: 10
                  });
                </script>
                </div>

                <button type="submit" class="btn btn-primary" onclick="update()">Raum BUCHEN</button>
            </form>
            </div>
            <div id='Conference_deleteRoom'>
              <form>
                <div class="form-row">
                  <div class="form-group col-md-3">
                    <label for="inputRaum">Raumname</label>
                    <input type="text" class="form-control" id="inputRaum4" placeholder="Raum">
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">Raum LÖSCHEN!</button>
              </form>
            </div>
            <div id='Conference_newRoom'>
              <form>
                <div class="form-row">
                  <div class="form-group col-md-3">
                    <label for="inputRaum">Raumname</label>
                    <input type="text" class="form-control" id="inputRaum4" placeholder="Raum">
                  </div>
                </div>
                <button type="submit" class="btn btn-primary">Raum erstellen</button>
              </form>
            </div>

          </div>
      </body>

      </html>